 <!DOCTYPE html>

<html lang="es">

 <head>
    <title>Disney_Bros_index.html</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="Css/Disney_Crono_Bros.css">
    <script src="Js/crono.js"></script>
 </head>

 <body onload="ConteoRegresivo()" onkeydown="teclaPresionada(event)">

    <p>FALTAN:</p>
    <p id="contador"></p>
    <!-- Mellado siempre una excusa -->
    <canvas id="myCanvas" width="640" height="480" border="1px solid"> </canvas>
    <!--<script type="text/javascript" src="Js/Disney_Bros.js"></script>
    <script type="text/javascript" src="Js/nivel1.js"></script>
    <script type="text/javascript" src="Js/nivel2.js"></script>
    <script type="text/javascript" src="Js/nivel3.js"></script>
    <script type="text/javascript" src="Js/nivel4.js"></script>
    <script type="text/javascript" src="Js/nivel5.js"></script>-->

 </body>
 
    <script type="text/javascript">//es el tag donde se empieza el codigo de js
        
        var canvas = document.getElementById('myCanvas'); //se creo una variable, la cual llama a los id="myCanvas"
        var contexto = canvas.getContext('2d');//declara la dimension del juego 
        
        //DECLARAMOS VARIABLES
        var vida= true;
        var vuelta=false;
        var piso=400;
        var xEnemigo=60
        var yEnemigo=400

        //FONDO
        var fondo=new Image(); //objeto
        fondo.src='Imagenes/toy.jpg';
        function fotofondo(){
            contexto.drawImage(fondo, 0, 0, 640, 480);
        }        


        //PERSONAJE

        var spriteSheet = new Image(); //Imagen de personaje
        spriteSheet.src = 'Imagenes/m.jpg'
        xmario = 0; ymario = 400; //Ubicacion del personaje en la pantalla 
        var posiciones = [{x:0, y:0, ancho:25, alto:16}];//es una matriz, por lo que cada una de las listas representa la ubicacion de un personaje en una imagen con varios personajes, es decir su recorte. 


        // ENEMIGO

        var spriteEnemigo = new Image(); //Imagen de enemigo
        spriteEnemigo.src = 'Imagenes/bota4.jpg'
        var enemigo = function(){
            var xEnemigo = 60; 
            var yEnemigo = 400;

        }
 
         //TECLAS Y MOVIMIENTOS DEL PERSONAJE

         function teclaPresionada(event){//para que nos tome las teclas
            var tecla=event.keyCode;
 
            if (tecla==68){//izq
                if (xmario<=623){//para que no se vaya de la pantalla
                    xmario=xmario+3;
                }
            }

            if (tecla==65){//der
                if (xmario>0){//para que no se vaya de la pantalla
                    xmario=xmario-3;
                }
            }

            if (tecla==87){//salto
                if (ymario>piso-1){ //Comprueba que mario esta en el piso(para que no pueda seguir saltandfo en el aire)
                ymario=ymario-120
                }
            }            
        } 


        //CARGA EL JUEGO

        spriteSheet.onload = function(){//funcion que nos carga el juego
            setInterval(actualizarJuego,1000/300);//actualiza el juego cada 300 cuadros en 1 segundo
        }

        //MOVIMIENTO DEL ENEMIGO

        function movene(){
        //if (xEnemigo>=60 && xEnemigo<=200 && vuelta==false){
        //    xEnemigo=xEnemigo+0.5
        //    }
        //if (xEnemigo==200){vuelta=true}
        //if(xEnemigo>=200 && xEnemigo<=60 && vuelta==true){xEnemigo=xEnemigo-0.5}
        xEnemigo=(Math.random()*50)+40;
        }

        //BUCLE PRINCIPAL

        function actualizarJuego(){ //actualiza fondo y personaje
            
            contexto.fillRect(0, 0, 640, 480);//contorno del lienzo  
            if (vida!=false){
        
                if ((xmario>xEnemigo-15 && xmario<xEnemigo+20) && (ymario<=yEnemigo && ymario>=yEnemigo)){//Para validar si mario esta vivo o no
                    vida=false
                }

                fotofondo();
                enemigo();
                movene();

                contexto.drawImage(spriteEnemigo,xEnemigo,yEnemigo,20,30);//Linea para redibujar a Enemigo

                var imagenActual = posiciones[0];//imagen actual del movimiento del personaje
                contexto.drawImage(spriteSheet, imagenActual.x, imagenActual.y, 15, 30, xmario, ymario, 15, 30);//se reedibuja el personaje 

                //SALTO
            
                if (vida==true){
                    ymario=ymario+0.25//Velocidad de caida (0.25)
                    if (ymario>piso){
                        ymario=piso
                        salto=false
                
                    }       
                }
        
                
            //console.log("ymario",ymario);
            //console.log("xmario",xmario);
            //console.log("xenemigo",xEnemigo);
            //console.log("vida",vida)
            }
            else{//Esto sucederia si mario muere, se llena la pantalla de color
                contexto.fillStyle = 'lightblue';
            }
        }

    </script>

</html>

<!--<audio id="FondoRatatouille" preload><source src="Sonidos/Ratatouillefondo.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>

    <audio id="FondoReyLeon" preload><source src="Sonidos/Elreyleonfondo.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>

    <audio id="FondoToyStory" preload><source src="Sonidos/Toystoryfondo.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>

    <audio id="FondoLaSirenita" preload><source src="Sonidos/Lasirenitafondo.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>

    <audio id="FondoMonsterInc" preload><source src="Sonidos/MonstersIncfondo.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>

    <audio id="Intro" preload><source src="Sonidos/Introcanciondisney.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>

    <audio id="Creditos" preload><source src="Sonidos/Creditos.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>

    <audio id="Salto" preload><source src="Sonidos/SaltoSFX.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>

    <audio id="Agarrar" preload><source src="Sonidos/AgarrarSFX.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>
    
    <audio id="Tirar" preload><source src="Sonidos/TiraSFX.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>

    <audio id="Hongo" preload><source src="Sonidos/HongoSFX.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>
    
    <audio id="Estrella" preload><source src="Sonidos/EstrellaSFX.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>

    <audio id="Pow" preload><source src="Sonidos/PowSFX.mp3" type="audio/mpeg" />Tu navegador no es compatible con el elemento audio de html5. Use un navegador compatible.</audio>-->